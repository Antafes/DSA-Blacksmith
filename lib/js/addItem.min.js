
$(function(){$("#addItem").on("click",function(a){a.preventDefault();$("#addItemPopup").dialog("open")});$("#addItemPopup").dialog({title:$("#addItemPopup").data("title"),modal:true,autoOpen:false,width:600,open:function(){$("#itemTypeSelect").on("change",function(){var b=$(".addItem").children("tbody").children(),a="odd";b.not(".name, .itemType").removeClass("odd even").hide();$.each(window.columsPerItemType[$(this).val()],function(c,d){if(c==="name"){return true}b.filter("."+c).show()});b.each(function(){if(!$(this).is(":visible")){return true}$(this).addClass(a);if(a==="odd"){a="even"}else{a="odd"}})});$("#itemTypeSelect").trigger("change");$(this).children("form").on("submit",function(d){d.preventDefault();var c={},g=$(this).serializeArray(),f,b,a;for(b=0;b<g.length;b++){f=g[b];if(f.name.indexOf("[")===-1){c[f.name]=f.value}else{a=f.name.split("[");if(typeof c[a[0]]==="undefined"){c[a[0]]={}}c[a[0]][a[1].substr(0,a[1].length-1)]=f.value}}$.post("ajax/addItem.php",{data:c},function(e){if(e.ok===true){document.location.reload()}},"json")})},close:function(){$(this).find("input:not([type=submit])").val("");$(this).children("form").off("submit")}})});