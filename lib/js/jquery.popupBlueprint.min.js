(function(b,a){b.widget("dsabs.popupBlueprint",b.dsabs.popup,{options:{templates:{container:b('<div style="display: none;"></div>'),table:b('<table class="showBlueprint collapse"></table>'),thead:b("<thead></thead>"),tbody:b("<tbody></tbody>"),row:b("<tr></tr>"),headColumn:b("<th></th>"),bodyColumn:b("<td></td>")},dialog:{title:a.translations.showBlueprint,width:900}},_createContent:function(c){b.post(this._config.targetUrl,b.proxy(function(i){if(!i.ok){throw new "Could not fetch blueprint.";return}var e,m,k,j,l,f,h,g={meleeWeapon:{name:"name",hp:"hitPoints",weight:"weight",bf:"breakFactor",ini:"initiative",price:"price",wm:"weaponModificator",notes:"notes",time:"time"},rangedWeapon:{name:"name",hp:"hitPoints",weight:"weight",price:"price",notes:"notes",time:"time"},projectile:{name:"name",projectileForItem:"projectileForItem",time:"time"}},d;m=this.options.templates.table.clone();k=this.options.templates.thead.clone();l=this.options.templates.row.clone();b.each(g[i.data.type],b.proxy(function(n,o){h=this.options.templates.headColumn.clone();h.addClass(o);h.text(a.translations[n]);l.append(h)},this));k.append(l);m.append(k);j=this.options.templates.tbody.clone();f=this.options.templates.row.clone();b.each(g[i.data.type],b.proxy(function(n,o){h=this.options.templates.bodyColumn.clone();h.addClass(o);h.text(i.data[o]);f.append(h)},this));j.append(f);m.append(j);e=this.options.templates.container.clone();e.append(m);d=b('<div class="infoContainer"></div>');d.append(a.translations.improvisationalNote+" = "+a.translations.improvisational+"<br />");d.append(a.translations.twoHandedNote+" = "+a.translations.twoHanded+"<br />");d.append(a.translations.privilegedNote+" = "+a.translations.privileged+"<br />");d.append(a.translations.bonusRangedFightValueNote+" = "+a.translations.bonusRangedFightValue+"<br />");d.append(a.translations.reducePhysicalStrengthRequirementNote+" = "+a.translations.reducePhysicalStrengthRequirement);e.append(d);this.options.content=e;if(typeof c==="function"){c()}},this),"json")}})}(jQuery,window));