
$(function(){$("#addMaterial").popupEdit({popup:"#addMaterialPopup",submitText:window.translations.addMaterial,dialog:{title:window.translations.addMaterial,width:1050,open:function(){$("#materialAssets").materialAsset({addLink:$("#addMaterialAssetRow"),currencies:window.currencies})},close:function(b){var a=$(b.target);a.find("select").val($(this).find("select").children(":first").attr("value"));$("#materialAssets").materialAsset("destroy")}}});$(".edit").popupEdit({popup:"#addMaterialPopup",submitText:window.translations.editMaterial,ajax:{success:function(a){$("#materialAssets").materialAsset({addLink:$("#addMaterialAssetRow"),currencies:window.currencies,values:a.materialAssets})}},dialog:{title:window.translations.editMaterial,width:1050,close:function(b){var a=$(b.target);a.find("select").val($(this).find("select").children(":first").attr("value"));$("#materialAssets").materialAsset("destroy")}}});$("#addMaterialType").on("click",function(a){a.preventDefault();$("#addMaterialTypePopup").dialog("open")});$("#addMaterialTypePopup").dialog({title:$("#addMaterialTypePopup").data("title"),modal:false,autoOpen:false,open:function(){$(this).children("form").submit(function(a){a.preventDefault();var b=$(this).serializeArray();$.post("ajax/addMaterialType.php",{name:b[0].value},function(c){if(c.ok===true){var d=$("<option></option>");d.attr("value",c.id);d.text(c.name);$(".materialType").children("select").append(d);$("#addMaterialTypePopup").dialog("close")}},"json")})},close:function(){$(this).find("input:not([type=submit])").val("")}})});