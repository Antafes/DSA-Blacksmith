$(function(){$("#addBlueprint").on("click",function(a){a.preventDefault();$("#addBlueprintPopup").dialog("open")});$("#addBlueprintPopup").dialog({title:$("#addBlueprintPopup").data("title"),modal:true,autoOpen:false,width:600,open:function(){$(this).children("form").on("submit",function(d){d.preventDefault();var c={},g=$(this).serializeArray(),f,b,a;for(b=0;b<g.length;b++){f=g[b];if(f.name.indexOf("[")===-1){c[f.name]=f.value}else{a=f.name.split("[");if(typeof c[a[0]]==="undefined"){c[a[0]]={}}c[a[0]][a[1].substr(0,a[1].length-1)]=f.value}}$.post("ajax/addBlueprint.php",{data:c},function(e){if(e.ok===true){document.location.reload()}},"json")});$("#itemSelect").on("change",function(){var a=$(this).children("option:selected");if(a.data("damagetype")==="stamina"){$("#damageTypeSelect").children("option[value=damage]").prop("disabled",true);$("#damageTypeSelect").val("stamina")}else{$("#damageTypeSelect").children("option[value=damage]").prop("disabled",false)}});$("#materialSelect").materialSelect({appendWeaponModificatorSelectTo:"#addBlueprintPopup",data:window.materials,addLink:$("#addMaterialRow")});$("#techniqueSelect").techniqueSelect({data:window.techniques,addLink:$("#addTechniqueRow")})},close:function(){$(this).find("input:not([type=submit])").val("");$("#addMaterialRow").off("click");$(this).children("form").off("submit")}})});