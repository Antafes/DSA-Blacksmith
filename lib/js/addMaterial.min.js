$(function(){$("#addMaterial").on("click",function(a){a.preventDefault();$("#addMaterialPopup").dialog("open")});$("#addMaterialType").on("click",function(a){a.preventDefault();$("#addMaterialTypePopup").dialog("open")});$("#addMaterialPopup").dialog({title:$("#addMaterialPopup").data("title"),modal:true,autoOpen:false,width:1050,open:function(){$(this).children("form").on("submit",function(d){d.preventDefault();var c={},g=$(this).serializeArray(),f,b,a;for(b=0;b<g.length;b++){f=g[b];if(f.name.indexOf("[")===-1){c[f.name]=f.value}else{a=f.name.split("[");if(typeof c[a[0]]==="undefined"){c[a[0]]={}}c[a[0]][a[1].substr(0,a[1].length-1)]=f.value}}$.post("ajax/addMaterial.php",{data:c},function(e){if(e.ok===true){document.location.reload()}},"json")});$("#materialAssets").materialAsset({addLink:$("#addMaterialAssetRow"),currencies:window.currencies})},close:function(){$(this).find("input:not([type=submit]), textarea").val("");$(this).find("select").val($(this).find("select").children(":first").attr("value"));$(this).children("form").off("submit")}});$("#addMaterialTypePopup").dialog({title:$("#addMaterialTypePopup").data("title"),modal:false,autoOpen:false,open:function(){$(this).children("form").submit(function(a){a.preventDefault();var b=$(this).serializeArray();$.post("ajax/addMaterialType.php",{name:b[0].value},function(c){if(c.ok===true){var d=$("<option></option>");d.attr("value",c.id);d.text(c.name);$(".materialType").children("select").append(d);$("#addMaterialTypePopup").dialog("close")}},"json")})},close:function(){$(this).find("input:not([type=submit])").val("")}})});