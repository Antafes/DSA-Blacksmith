$(function(){$(".blueprintShowLink").popupBlueprint();$(document).tooltip({content:function(){$(this).addClass("tooltip");return $(this).attr("title").replace(/(?:\r\n|\r|\n)/g,"<br />")}});$("#addBlueprint").popupEdit({popup:"#addBlueprintPopup",submitText:window.translations.addBlueprint,dialog:{title:window.translations.addBlueprint,width:600,open:function(){$("#itemSelect").on("change",function(){var d=$(this).find("option:selected"),f=d.data("itemtype"),c=$("#itemTypeSelect").children(),b=false,e=$("#addBlueprintPopup").find(".addBlueprint").children("tbody").children(),a="odd";if(d.data("damagetype")==="stamina"){$("#damageTypeSelect").children("option[value=damage]").prop("disabled",true);$("#damageTypeSelect").val("stamina")}else{$("#damageTypeSelect").children("option[value=damage]").prop("disabled",false)}c.each(function(){if($(this).data("type")!==f){$(this).hide()}else{$(this).show();if(!b){$("#itemTypeSelect").val($(this).attr("value"));b=true}}});e.not(".name, .items, .itemType").removeClass("odd even").hide();$.each(window.columsPerItemType[d.data("itemtype")],function(g,h){e.filter("."+h).show()});$("#addBlueprint").popupEdit("adjustRowLayout")});$("#itemSelect").trigger("change");$("#materialSelect").materialSelect({appendWeaponModificatorSelectTo:"#addBlueprintPopup",materials:window.materials,talents:window.talents,addLink:$("#addMaterialRow")});$("#techniqueSelect").techniqueSelect({data:window.techniques,addLink:$("#addTechniqueRow")})},close:function(){$(this).find("input:not([type=submit])").val("");$("#addMaterialRow").off("click");$(this).children("form").off("submit");$("#materialSelect").materialSelect("destroy");$("#techniqueSelect").techniqueSelect("destroy")}},ajax:{success:function(){$("#itemTypeSelect").trigger("change")}}});$(".edit").popupEdit({popup:"#addBlueprintPopup",submitText:window.translations.editBlueprint,dialog:{title:window.translations.editBlueprint,width:600,open:function(){$("#itemSelect").on("change",function(){var d=$(this).find("option:selected"),f=d.data("itemtype"),c=$("#itemTypeSelect").children(),b=false,e=$("#addBlueprintPopup").find(".addBlueprint").children("tbody").children(),a="odd";if(d.data("damagetype")==="stamina"){$("#damageTypeSelect").children("option[value=damage]").prop("disabled",true);$("#damageTypeSelect").val("stamina")}else{$("#damageTypeSelect").children("option[value=damage]").prop("disabled",false)}c.each(function(){if($(this).data("type")!==f){$(this).hide()}else{$(this).show();if(!b){$("#itemTypeSelect").val($(this).attr("value"));b=true}}});e.not(".name, .items, .itemType").removeClass("odd even").hide();$.each(window.columsPerItemType[d.data("itemtype")],function(g,h){e.filter("."+h).show()});$(".edit").popupEdit("adjustRowLayout")});$("#itemSelect").trigger("change");$("#materialSelect").materialSelect({appendWeaponModificatorSelectTo:"#addBlueprintPopup",materials:window.materials,talents:window.talents,addLink:$("#addMaterialRow")});$("#techniqueSelect").techniqueSelect({data:window.techniques,addLink:$("#addTechniqueRow")})},close:function(){$(this).find("input:not([type=submit])").val("");$("#addMaterialRow").off("click");$(this).children("form").off("submit");$("#materialSelect").materialSelect("destroy");$("#techniqueSelect").techniqueSelect("destroy")}},ajax:{success:function(a){$("#itemSelect").trigger("change");$("#itemTypeSelect").trigger("change");$("#materialSelect").materialSelect("clear");$("#techniqueSelect").techniqueSelect("clear");$.each(a.materials,function(b,c){$("#materialSelect").materialSelect("addRow",c)});$.each(a.techniques,function(b,c){$("#techniqueSelect").techniqueSelect("addRow",c)});if(a.upgradeWeaponModificator){$("#addBlueprintPopup").find("tr.upgradeWeaponModificator").find("input.upgradeWeaponModificatorAttack").val(a.upgradeWeaponModificator.attack);$("#addBlueprintPopup").find("tr.upgradeWeaponModificator").find("input.upgradeWeaponModificatorParade").val(a.upgradeWeaponModificator.parade)}}}});$(".publicCheckbox").ajaxCheckbox({target:"index.php?page=Blueprints&action=public"});$("#showPublicBlueprints").ajaxCheckbox({target:"index.php?page=Options&action=showPublicBlueprints"})});